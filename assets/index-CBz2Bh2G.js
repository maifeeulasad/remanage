import{j as e,l as v,P as K,R as A,a as M,b as h,F as P,C as F,c as j,L as $,r as m,S as H,I as w,B as T,d as V,e as y,M as q,f as z,g as N,h as R,T as U,i as W,k as J,m as O,N as Y,n as G}from"./.pnpm-l21pc9hx.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const t of a)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const t={};return a.integrity&&(t.integrity=a.integrity),a.referrerPolicy&&(t.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?t.credentials="include":a.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(a){if(a.ep)return;a.ep=!0;const t=s(a);fetch(a.href,t)}})();const Q=()=>e(v.Header,{style:{backgroundColor:"transparent"},children:e(K,{title:"re:manage",subTitle:"Manage your ways"})});class X extends A.Component{render(){return e("div",{style:{margin:"20px",flex:"grow"},children:e(v.Content,{children:this.props.children})})}}const Z="_footer_1d89m_1",ee="_footerTextCenter_1d89m_7",B={footer:Z,footerTextCenter:ee},_=`e1a591fe9482e5a310558f021fa02e6dd4d962c5
`,te=()=>{const[d,n]=M.useNotification(),s=()=>{j.copyText(_),d.open({key:_,message:"Trace ID copied to clipboard",description:`ID: ${_}`,duration:2,closeIcon:e("div",{})})};return h(P,{children:[n,e(v.Footer,{className:B.footer,children:h("div",{className:B.footerTextCenter,children:[h("div",{children:["Trace: ",_,e(F,{onClick:()=>s()})]}),h("div",{children:["Â© ",new Date().getFullYear()," - Maifee Ul Asad"]})]})})]})};class ae extends A.Component{render(){const{children:n}=this.props;return h($,{style:{minHeight:"100vh"},children:[e(Q,{}),e(X,{children:n}),e(te,{})]})}}const E=m.createContext(null),ne=({onDragEnd:d,children:n})=>{const[s,r]=m.useState(null),a=o=>{const g=o.target.closest("[data-droppable-id]");if(!g)return;const c=o.target.closest("[data-draggable-id]");let l=0;if(c){const i=Array.from(g.querySelectorAll("[data-draggable-id]"));l=i.findIndex(u=>u===c),l===-1&&(l=i.length)}r(l)},t=o=>{o.preventDefault();const g=Number(o.dataTransfer.getData("sourceIndex")),c=o.dataTransfer.getData("sourceDroppableId"),l=o.dataTransfer.getData("draggableId"),i=o.target.closest("[data-droppable-id]");if(!i)return;const u=i.getAttribute("data-droppable-id"),p=o.target.closest("[data-draggable-id]");let C=0;if(p){const b=Array.from(i.querySelectorAll("[data-draggable-id]"));C=b.findIndex(x=>x===p),C===-1&&(C=b.length)}const I={source:{index:g,droppableId:c},destination:{index:C,droppableId:u},draggableId:l};r(null),d(I)};return e(E.Provider,{value:{dragOverIndex:s,setDragOverIndex:r},children:e("div",{onDragOver:o=>{o.preventDefault(),a(o)},onDrop:t,children:n})})},L=m.createContext(null),re=({droppableId:d,children:n})=>{const s=m.useRef(null),{dragOverIndex:r}=m.useContext(E);return e(L.Provider,{value:{droppableId:d},children:n({innerRef:a=>{s.current=a,a&&a.setAttribute("data-droppable-id",d)},placeholder:r!==null?e("div",{style:{height:"40px",background:"#e0e0e0",border:"2px dashed #aaa",marginBottom:"8px"}},"__placeholder__"):null},{isDraggingOver:r!==null})})},oe=({draggableId:d,index:n,children:s})=>{const r=m.useContext(L),[a,t]=m.useState(!1);if(!r)throw new Error("Draggable must be used within a Droppable");const o=c=>{t(!0),c.dataTransfer.setData("draggableId",d),c.dataTransfer.setData("sourceIndex",n.toString()),c.dataTransfer.setData("sourceDroppableId",r.droppableId),c.dataTransfer.effectAllowed="move"},g=()=>{t(!1)};return s({innerRef:c=>{c&&(c.setAttribute("draggable","true"),c.setAttribute("data-draggable-id",d),c.setAttribute("data-index",n.toString()),c.addEventListener("dragstart",o),c.addEventListener("dragend",g))},draggableProps:{draggable:!0},dragHandleProps:{},dragging:a})},se=()=>new Promise((d,n)=>{const s=indexedDB.open("kanban",1);s.onsuccess=r=>{const a=r.target.result;d(a)},s.onerror=()=>n(),s.onupgradeneeded=r=>{r.target.result.createObjectStore("kanban",{keyPath:"id"})}}),le=d=>new Promise((n,s)=>{const r=d.transaction(["kanban"],"readonly");r.onerror=t=>{s(t)};const a=r.objectStore("kanban");a.getAll().onsuccess=t=>{n(t.target.result)}}),S=(d,n)=>new Promise((s,r)=>{const a=d.transaction(["kanban"],"readwrite");a.oncomplete=()=>s(),a.onerror=o=>r(o);const t=a.objectStore("kanban");n.map(o=>t.put(o))}),de=()=>{const[d,n]=m.useState(!0),[s,r]=m.useState(void 0),[a,t]=m.useState([]);m.useEffect(()=>{se().then(i=>{r(i),n(!1)})},[]);const o=()=>{if(!s)throw new Error("DB not initialized");return le(s)};return m.useEffect(()=>{s&&o().then(i=>t(i))},[d]),{kanbanColumns:a,setKanbanColumns:i=>{if(!s)throw new Error("DB not initialized");n(!0),S(s,i).then(()=>{t(i),n(!1)}).catch(()=>{n(!1)})},addNewKanbanColumn:i=>{if(!s)throw new Error("DB not initialized");const u=[i];n(!0),S(s,u).then(()=>{t(u),n(!1)}).catch(()=>{n(!1)})},updateKanbanColumn:i=>{if(!s)throw new Error("DB not initialized");const u=[i];n(!0),S(s,u).then(()=>{t(u),n(!1)}).catch(()=>{n(!1)})},loading:d}},ie=[{id:"Backlog",title:"Backlog",tasks:[{id:"prem",title:"prem",details:"prem korte hobe"},{id:"taka",title:"taka",details:"onk onk taka",metadeta:""},{id:"time",title:"time",details:"time lagbe",metadeta:""},{id:"poralekha",title:"poralekha",details:"eta kortei vule gesi"}]},{id:"ToDo",title:"To Do",tasks:[{id:"shob",title:"shob",details:"ekdom shob..."}]},{id:"WIP",title:"WIP",tasks:[{id:"janinah",title:"janinah",details:"kichui jani nah"}]},{id:"Completed",title:"Completee",tasks:[]}],ce=({value:d,onChange:n,columnsExisting:s})=>{const[r,a]=m.useState(s),t=m.useRef(null);return e(H,{style:{width:300},onChange:()=>{},value:d,defaultValue:r[0]||void 0,onSelect:o=>{n&&n(o)},options:r.map(o=>({value:o,label:o})),dropdownRender:o=>h(P,{children:[o,h("div",{style:{display:"flex"},children:[e(w,{ref:t}),e(T,{icon:e(V,{}),type:"primary",onClick:()=>{var c,l;const g=(l=(c=t.current)==null?void 0:c.input)==null?void 0:l.value;g&&!r.find(i=>i===g)&&a([...r,g])}})]})]})})},ue=m.forwardRef(({columns:d,onOkClicked:n},s)=>{const[r]=y.useForm(),[a,t]=m.useState(!1);return m.useImperativeHandle(s,()=>({close(){t(!1)},open(){t(!0)},getValue(){return new Promise((o,g)=>{r.validateFields().then(()=>{const c=r.getFieldsValue();o(c),r.resetFields()}).catch(()=>{g()})})}})),e(q,{title:"Add Item","data-cy":"add-item-modal",visible:a,closable:!0,onCancel:()=>t(!1),onOk:()=>n(),children:h(y,{form:r,children:[e(y.Item,{name:"column",label:"Column",rules:[{required:!0,message:"Please select or enter COLUMN"}],children:e(ce,{columnsExisting:d})}),e(y.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter TITLE of your task"}],children:e(w,{placeholder:"Title"})}),e(y.Item,{name:"details",label:"Details",rules:[{required:!0,message:"Please enter DETAILS of your task"}],children:e(w,{placeholder:"Details"})}),e(y.Item,{name:"metadata",label:"Metadata",children:e(w.TextArea,{rows:5,placeholder:"Metadata"})})]})})}),me="_kanbanCard_1l8n9_1",ge="_buttonContainer_1l8n9_7",pe="_flexSpace_1l8n9_13",be="_button_1l8n9_7",fe="_addSeedButton_1l8n9_21",he="_addItemButton_1l8n9_25",Ce="_kanbanContainer_1l8n9_29",ke="_columnContainer_1l8n9_34",Ie="_dragging_1l8n9_42",De="_kanbanRowTitle_1l8n9_46",ye="_kanbanListItem_1l8n9_50",xe="_kanbanPlaceholder_1l8n9_56",f={kanbanCard:me,buttonContainer:ge,flexSpace:pe,button:be,addSeedButton:fe,addItemButton:he,kanbanContainer:Ce,columnContainer:ke,dragging:Ie,kanbanRowTitle:De,kanbanListItem:ye,kanbanPlaceholder:xe},_e=()=>{const{kanbanColumns:d,setKanbanColumns:n,addNewKanbanColumn:s,updateKanbanColumn:r,loading:a}=de(),t=m.createRef(),o=l=>{if(l.destination===void 0||l.destination===null)return;const i=l.source.droppableId,u=l.destination.droppableId,p=d.find(k=>k.id===i),C=d.find(k=>k.id===u);if(p===void 0||C===void 0)return;const I=C.tasks,b=p.tasks,x=b[l.source.index];b.splice(l.source.index,1),I.splice(l.destination.index,0,x);const D=d.map(k=>k.id===i?{...k,tasks:b}:k.id===u?{...k,tasks:I}:k);n(D)},g=()=>{!t||!t.current||(t.current.getValue().then(l=>{const i=l.column,u=d.find(p=>p.id===i);if(u)u.tasks=[...u.tasks,{id:new Date().toUTCString(),title:l.title,details:l.details,metadeta:l.metadata}],r(u);else{const p={id:i,title:i,tasks:[{id:new Date().toUTCString(),title:l.title,details:l.details,metadeta:l.metadata}]};s(p)}}),t.current.close())},c=()=>{!t||!t.current||t.current.open()};return h(P,{children:[a&&e(z,{}),h("div",{className:f.buttonContainer,children:[e("div",{className:f.flexSpace}),e(T,{className:`${f.button} ${f.addSeedButton}`,type:"primary","data-cy":"add-seed",onClick:()=>n(ie),children:"Add Seed"}),e(T,{className:`${f.button} ${f.addItemButton}`,type:"primary","data-cy":"add-item",onClick:()=>c(),children:"Add Item"})]}),e(ue,{ref:t,columns:d.map(l=>l.title),onOkClicked:()=>{g()}}),e(ne,{onDragEnd:o,children:e("div",{className:f.kanbanContainer,children:d.map(l=>e(re,{droppableId:l.id,children:(i,u)=>{const{dragOverIndex:p}=m.useContext(E),C=u.isDraggingOver,I=[...l.tasks];return C&&p!==null&&p<=I.length&&I.splice(p,0,{id:"__placeholder__",title:"",details:"",metadeta:"",isPlaceholder:!0}),e("div",{className:f.columnContainer,ref:i.innerRef,children:e(N,{header:e(U.Title,{className:f.kanbanRowTitle,level:4,children:l.title}),dataSource:I,renderItem:(b,x)=>b.isPlaceholder?e("div",{className:f.kanbanPlaceholder},"placeholder"):e(N.Item,{className:f.kanbanListItem,children:e(oe,{draggableId:b.id,index:x,children:D=>e(R,{"data-cy":"kanban-card",className:`${f.kanbanCard} ${D.dragging?f.dragging:""}`,title:b.title,ref:D.innerRef,...D.draggableProps,...D.dragHandleProps,children:e(R.Meta,{title:b.details,description:b.metadeta})})},b.id)})})})}},l.title))})})]})},we=()=>e(_e,{}),Se=()=>e(W,{basename:"/remanage/",children:e(ae,{children:h(J,{children:[e(O,{path:"/",element:e(we,{})}),e(O,{path:"*",element:e(Y,{to:"/",replace:!0})})]})})}),Te=G.createRoot(document.getElementById("root"));Te.render(e(Se,{}));
