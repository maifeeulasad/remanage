import{g as $}from"./@ant-design.48da76a4.js";import{u as A,v as B,w as j,x as D,c as W,q as L}from"./@babel.e466e1a4.js";import{r as t}from"./react.c0c01f32.js";import{n as q,p as T,M as k,A as F}from"./rc-util.7da18822.js";import{i as K}from"./resize-observer-polyfill.8deb1e21.js";var c=new Map;function V(e){e.forEach(function(o){var r,n=o.target;(r=c.get(n))===null||r===void 0||r.forEach(function(i){return i(n)})})}var H=new K(V);function X(e,o){c.has(e)||(c.set(e,new Set),H.observe(e)),c.get(e).add(o)}function Y(e,o){c.has(e)&&(c.get(e).delete(o),c.get(e).size||(H.unobserve(e),c.delete(e)))}var G=function(e){A(r,e);var o=B(r);function r(){return j(this,r),o.apply(this,arguments)}return D(r,[{key:"render",value:function(){return this.props.children}}]),r}(t.exports.Component),x=t.exports.createContext(null);function J(e){var o=e.children,r=e.onBatchResize,n=t.exports.useRef(0),i=t.exports.useRef([]),s=t.exports.useContext(x),v=t.exports.useCallback(function(u,f,l){n.current+=1;var d=n.current;i.current.push({size:u,element:f,data:l}),Promise.resolve().then(function(){d===n.current&&(r==null||r(i.current),i.current=[])}),s==null||s(u,f,l)},[r,s]);return t.exports.createElement(x.Provider,{value:v},o)}function Q(e){var o=e.children,r=e.disabled,n=t.exports.useRef(null),i=t.exports.useRef(null),s=t.exports.useContext(x),v=typeof o=="function",u=v?o(n):o,f=t.exports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),l=!v&&t.exports.isValidElement(u)&&q(u),d=l?u.ref:null,P=t.exports.useMemo(function(){return T(d,n)},[d,n]),m=t.exports.useRef(e);m.current=e;var C=t.exports.useCallback(function(a){var b=m.current,_=b.onResize,S=b.data,z=a.getBoundingClientRect(),R=z.width,g=z.height,h=a.offsetWidth,p=a.offsetHeight,E=Math.floor(R),y=Math.floor(g);if(f.current.width!==E||f.current.height!==y||f.current.offsetWidth!==h||f.current.offsetHeight!==p){var w={width:E,height:y,offsetWidth:h,offsetHeight:p};f.current=w;var I=h===Math.round(R)?R:h,N=p===Math.round(g)?g:p,M=W(W({},w),{},{offsetWidth:I,offsetHeight:N});s==null||s(M,a,S),_&&Promise.resolve().then(function(){_(M,a)})}},[]);return t.exports.useEffect(function(){var a=k(n.current)||k(i.current);return a&&!r&&X(a,C),function(){return Y(a,C)}},[n.current,r]),t.exports.createElement(G,{ref:i},l?t.exports.cloneElement(u,{ref:P}):u)}var U="rc-observer-key";function O(e){var o=e.children,r=typeof o=="function"?[o]:F(o);return r.map(function(n,i){var s=(n==null?void 0:n.key)||"".concat(U,"-").concat(i);return t.exports.createElement(Q,L({},e,{key:s}),n)})}O.Collection=J;var Z=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"})),ie=$(Z);export{O as R,ie as r};
