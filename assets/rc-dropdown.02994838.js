import{g as Y}from"./@ant-design.cc24bc1e.js";import{b as G,c as J,a as S,d as Q}from"./@babel.8e2648a6.js";import{r as a}from"./react.c0c01f32.js";import{T as U}from"./rc-trigger.3855d523.js";import{c as k}from"./classnames.86f4c91e.js";import{m as Z,F as ee,E as F}from"./rc-util.673abd87.js";var d={adjustX:1,adjustY:1},g=[0,0],te={topLeft:{points:["bl","tl"],overflow:d,offset:[0,-4],targetOffset:g},topCenter:{points:["bc","tc"],overflow:d,offset:[0,-4],targetOffset:g},topRight:{points:["br","tr"],overflow:d,offset:[0,-4],targetOffset:g},bottomLeft:{points:["tl","bl"],overflow:d,offset:[0,4],targetOffset:g},bottomCenter:{points:["tc","bc"],overflow:d,offset:[0,4],targetOffset:g},bottomRight:{points:["tr","br"],overflow:d,offset:[0,4],targetOffset:g}},re=F.ESC,ne=F.TAB;function oe(e){var m=e.visible,b=e.setTriggerVisible,u=e.triggerRef,p=e.onVisibleChange,c=e.autoFocus,f=a.exports.useRef(!1),C=function(){if(m&&u.current){var r,o,i,l;(r=u.current)===null||r===void 0||(o=r.triggerRef)===null||o===void 0||(i=o.current)===null||i===void 0||(l=i.focus)===null||l===void 0||l.call(i),b(!1),typeof p=="function"&&p(!1)}},y=function(){var r,o,i,l,O=ee((r=u.current)===null||r===void 0||(o=r.popupRef)===null||o===void 0||(i=o.current)===null||i===void 0||(l=i.getElement)===null||l===void 0?void 0:l.call(i)),v=O[0];return v!=null&&v.focus?(v.focus(),f.current=!0,!0):!1},h=function(r){switch(r.keyCode){case re:C();break;case ne:{var o=!1;f.current||(o=y()),o?r.preventDefault():C();break}}};a.exports.useEffect(function(){return m?(window.addEventListener("keydown",h),c&&Z(y,3),function(){window.removeEventListener("keydown",h),f.current=!1}):function(){f.current=!1}},[m])}var ie=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function ae(e,m){var b=e.arrow,u=b===void 0?!1:b,p=e.prefixCls,c=p===void 0?"rc-dropdown":p,f=e.transitionName,C=e.animation,y=e.align,h=e.placement,w=h===void 0?"bottomLeft":h,r=e.placements,o=r===void 0?te:r,i=e.getPopupContainer,l=e.showAction,O=e.hideAction,v=e.overlayClassName,R=e.overlayStyle,L=e.visible,M=e.trigger,P=M===void 0?["hover"]:M,j=e.autoFocus,W=G(e,ie),_=a.exports.useState(),T=J(_,2),D=T[0],x=T[1],E="visible"in e?L:D,A=a.exports.useRef(null);a.exports.useImperativeHandle(m,function(){return A.current}),oe({visible:E,setTriggerVisible:x,triggerRef:A,onVisibleChange:e.onVisibleChange,autoFocus:j});var K=function(){var t=e.overlay,n;return typeof t=="function"?n=t():n=t,n},B=function(t){var n=e.onOverlayClick;x(!1),n&&n(t)},H=function(t){var n=e.onVisibleChange;x(t),typeof n=="function"&&n(t)},V=function(){var t=K();return a.exports.createElement(a.exports.Fragment,null,u&&a.exports.createElement("div",{className:"".concat(c,"-arrow")}),t)},$=function(){var t=e.overlay;return typeof t=="function"?V:V()},q=function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n},z=function(){var t=e.openClassName;return t!==void 0?t:"".concat(c,"-open")},I=function(){var t=e.children,n=t.props?t.props:{},X=k(n.className,z());return E&&t?a.exports.cloneElement(t,{className:X}):t},N=O;return!N&&P.indexOf("contextMenu")!==-1&&(N=["click"]),a.exports.createElement(U,S(S({builtinPlacements:o},W),{},{prefixCls:c,ref:A,popupClassName:k(v,Q({},"".concat(c,"-show-arrow"),u)),popupStyle:R,action:P,showAction:l,hideAction:N||[],popupPlacement:w,popupAlign:y,popupTransitionName:f,popupAnimation:C,popupVisible:E,stretch:q()?"minWidth":"",popup:$(),onPopupVisibleChange:H,onPopupClick:B,getPopupContainer:i}),I())}var le=a.exports.forwardRef(ae),se=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"})),me=Y(se);export{me as r};
