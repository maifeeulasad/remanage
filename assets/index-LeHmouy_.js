var q=Object.defineProperty;var U=(a,e,o)=>e in a?q(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o;var k=(a,e,o)=>U(a,typeof e!="symbol"?e+"":e,o);import{j as t,l as L,P as W,R as H,a as z,b as h,F as A,C as J,c as Y,L as G,r as p,i as _,S as Q,I as N,B as E,d as X,e as w,M as Z,f as ee,g as F,h as K,T as te,k as ae,m as ne,n as M,N as re,o as oe}from"./.pnpm-aDWv8Tas.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const se=()=>t(L.Header,{style:{backgroundColor:"transparent"},children:t(W,{title:"re:manage",subTitle:"Manage your ways"})});class le extends H.Component{render(){return t("div",{style:{margin:"20px",flex:"grow"},children:t(L.Content,{children:this.props.children})})}}const ie="_footer_1d89m_1",de="_footerTextCenter_1d89m_7",$={footer:ie,footerTextCenter:de},S=`9bbbd46d7f014dfbef414be0816a1223aca95ba4
`,ce=()=>{const[a,e]=z.useNotification(),o=()=>{Y.copyText(S),a.open({key:S,message:"Trace ID copied to clipboard",description:`ID: ${S}`,duration:2,closeIcon:t("div",{})})};return h(A,{children:[e,t(L.Footer,{className:$.footer,children:h("div",{className:$.footerTextCenter,children:[h("div",{children:["Trace: ",S,t(J,{onClick:()=>o()})]}),h("div",{children:["Â© ",new Date().getFullYear()," - Maifee Ul Asad"]})]})})]})};class ue extends H.Component{render(){const{children:e}=this.props;return h(G,{style:{minHeight:"100vh"},children:[t(se,{}),t(le,{children:e}),t(ce,{})]})}}const B=p.createContext(null),pe=({onDragEnd:a,children:e})=>{const[o,r]=p.useState(null),n=d=>{const c=d.target.closest("[data-droppable-id]");if(!c)return;const l=d.target.closest("[data-draggable-id]");let i=0;if(l){const u=Array.from(c.querySelectorAll("[data-draggable-id]"));i=u.findIndex(m=>m===l),i===-1&&(i=u.length)}r(i)},s=d=>{d.preventDefault();const c=Number(d.dataTransfer.getData("sourceIndex")),l=d.dataTransfer.getData("sourceDroppableId"),i=d.dataTransfer.getData("draggableId"),u=d.target.closest("[data-droppable-id]");if(!u)return;const m=u.getAttribute("data-droppable-id"),g=d.target.closest("[data-draggable-id]");let C=0;if(g){const b=Array.from(u.querySelectorAll("[data-draggable-id]"));C=b.findIndex(T=>T===g),C===-1&&(C=b.length)}const I={source:{index:c,droppableId:l},destination:{index:C,droppableId:m},draggableId:i};r(null),a(I)};return t(B.Provider,{value:{dragOverIndex:o,setDragOverIndex:r},children:t("div",{onDragOver:d=>{d.preventDefault(),n(d)},onDrop:s,children:e})})},V=p.createContext(null),me=({droppableId:a,children:e})=>{const o=p.useRef(null),{dragOverIndex:r}=p.useContext(B);return t(V.Provider,{value:{droppableId:a},children:e({innerRef:n=>{o.current=n,n&&n.setAttribute("data-droppable-id",a)},placeholder:r!==null?t("div",{style:{height:"40px",background:"#e0e0e0",border:"2px dashed #aaa",marginBottom:"8px"}},"__placeholder__"):null},{isDraggingOver:r!==null})})},ge=({draggableId:a,index:e,children:o})=>{const r=p.useContext(V),[n,s]=p.useState(!1);if(!r)throw new Error("Draggable must be used within a Droppable");const d=l=>{s(!0),l.dataTransfer.setData("draggableId",a),l.dataTransfer.setData("sourceIndex",e.toString()),l.dataTransfer.setData("sourceDroppableId",r.droppableId),l.dataTransfer.effectAllowed="move"},c=()=>{s(!1)};return o({innerRef:l=>{l&&(l.setAttribute("draggable","true"),l.setAttribute("data-draggable-id",a),l.setAttribute("data-index",e.toString()),l.addEventListener("dragstart",d),l.addEventListener("dragend",c))},draggableProps:{draggable:!0},dragHandleProps:{},dragging:n})};var be=Object.defineProperty,fe=Object.getOwnPropertyDescriptor,v=(a,e,o,r)=>{for(var n=r>1?void 0:r?fe(e,o):e,s=a.length-1,d;s>=0;s--)(d=a[s])&&(n=(r?d(e,o,n):d(n))||n);return r&&n&&be(e,o,n),n};let P=class{constructor(a,e,o,r,n){k(this,"id");k(this,"title");k(this,"details");k(this,"metadeta");k(this,"isPlaceholder");this.id=a,this.title=e,this.details=o,this.metadeta=r,this.isPlaceholder=n}};v([_.KeyPath()],P.prototype,"id",2);v([_.Index()],P.prototype,"title",2);P=v([_.DataClass()],P);let D=class{constructor(a,e,o=[]){k(this,"id");k(this,"title");k(this,"tasks");this.id=a,this.title=e,this.tasks=o}};v([_.KeyPath()],D.prototype,"id",2);v([_.Index()],D.prototype,"title",2);D=v([_.DataClass()],D);let O=null;const R=async()=>O||(O=await _.Database.build("kanban",[D,P]),O),he=async()=>await(await R()).Column.list(),j=async a=>{const e=await R();for(const o of a){const r=new D(o.id,o.title,o.tasks);try{await e.Column.update(r)}catch{await e.Column.create(r)}}},Ce=async a=>{const e=await R(),o=new D(a.id,a.title,a.tasks);await e.Column.update(o)},ye=()=>{const[a,e]=p.useState(!0),[o,r]=p.useState([]);return p.useEffect(()=>{(async()=>{try{await R();const l=await he();r(l),e(!1)}catch(l){console.error("Failed to initialize database:",l),e(!1)}})()},[]),{kanbanColumns:o,setKanbanColumns:async c=>{e(!0);try{await j(c),r(c)}catch(l){console.error("Failed to set columns:",l)}finally{e(!1)}},addNewKanbanColumn:async c=>{e(!0);try{await j([c]),r([...o,c])}catch(l){console.error("Failed to add column:",l)}finally{e(!1)}},updateKanbanColumn:async c=>{e(!0);try{await Ce(c);const l=o.map(i=>i.id===c.id?c:i);r(l)}catch(l){console.error("Failed to update column:",l)}finally{e(!1)}},loading:a}},ke=[{id:"Backlog",title:"Backlog",tasks:[{id:"prem",title:"prem",details:"prem korte hobe"},{id:"taka",title:"taka",details:"onk onk taka",metadeta:""},{id:"time",title:"time",details:"time lagbe",metadeta:""},{id:"poralekha",title:"poralekha",details:"eta kortei vule gesi"}]},{id:"ToDo",title:"To Do",tasks:[{id:"shob",title:"shob",details:"ekdom shob..."}]},{id:"WIP",title:"WIP",tasks:[{id:"janinah",title:"janinah",details:"kichui jani nah"}]},{id:"Completed",title:"Completee",tasks:[]}],Ie=({value:a,onChange:e,columnsExisting:o})=>{const[r,n]=p.useState(o),s=p.useRef(null);return t(Q,{style:{width:300},onChange:()=>{},value:a,defaultValue:r[0]||void 0,onSelect:d=>{e&&e(d)},options:r.map(d=>({value:d,label:d})),dropdownRender:d=>h(A,{children:[d,h("div",{style:{display:"flex"},children:[t(N,{ref:s}),t(E,{icon:t(X,{}),type:"primary",onClick:()=>{var l,i;const c=(i=(l=s.current)==null?void 0:l.input)==null?void 0:i.value;c&&!r.find(u=>u===c)&&n([...r,c])}})]})]})})},De=p.forwardRef(({columns:a,onOkClicked:e},o)=>{const[r]=w.useForm(),[n,s]=p.useState(!1);return p.useImperativeHandle(o,()=>({close(){s(!1)},open(){s(!0)},getValue(){return new Promise((d,c)=>{r.validateFields().then(()=>{const l=r.getFieldsValue();d(l),r.resetFields()}).catch(()=>{c()})})}})),t(Z,{title:"Add Item","data-cy":"add-item-modal",visible:n,closable:!0,onCancel:()=>s(!1),onOk:()=>e(),children:h(w,{form:r,children:[t(w.Item,{name:"column",label:"Column",rules:[{required:!0,message:"Please select or enter COLUMN"}],children:t(Ie,{columnsExisting:a})}),t(w.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter TITLE of your task"}],children:t(N,{placeholder:"Title"})}),t(w.Item,{name:"details",label:"Details",rules:[{required:!0,message:"Please enter DETAILS of your task"}],children:t(N,{placeholder:"Details"})}),t(w.Item,{name:"metadata",label:"Metadata",children:t(N.TextArea,{rows:5,placeholder:"Metadata"})})]})})}),_e="_kanbanCard_1l8n9_1",xe="_buttonContainer_1l8n9_7",we="_flexSpace_1l8n9_13",ve="_button_1l8n9_7",Te="_addSeedButton_1l8n9_21",Pe="_addItemButton_1l8n9_25",Se="_kanbanContainer_1l8n9_29",Oe="_columnContainer_1l8n9_34",Ne="_dragging_1l8n9_42",Re="_kanbanRowTitle_1l8n9_46",Ee="_kanbanListItem_1l8n9_50",Le="_kanbanPlaceholder_1l8n9_56",f={kanbanCard:_e,buttonContainer:xe,flexSpace:we,button:ve,addSeedButton:Te,addItemButton:Pe,kanbanContainer:Se,columnContainer:Oe,dragging:Ne,kanbanRowTitle:Re,kanbanListItem:Ee,kanbanPlaceholder:Le},Ae=()=>{const{kanbanColumns:a,setKanbanColumns:e,addNewKanbanColumn:o,updateKanbanColumn:r,loading:n}=ye(),s=p.createRef(),d=i=>{if(i.destination===void 0||i.destination===null)return;const u=i.source.droppableId,m=i.destination.droppableId,g=a.find(y=>y.id===u),C=a.find(y=>y.id===m);if(g===void 0||C===void 0)return;const I=C.tasks,b=g.tasks,T=b[i.source.index];b.splice(i.source.index,1),I.splice(i.destination.index,0,T);const x=a.map(y=>y.id===u?{...y,tasks:b}:y.id===m?{...y,tasks:I}:y);e(x)},c=()=>{!s||!s.current||(s.current.getValue().then(i=>{const u=i.column,m=a.find(g=>g.id===u);if(m)m.tasks=[...m.tasks,{id:new Date().toUTCString(),title:i.title,details:i.details,metadeta:i.metadata}],r(m);else{const g={id:u,title:u,tasks:[{id:new Date().toUTCString(),title:i.title,details:i.details,metadeta:i.metadata}]};o(g)}}),s.current.close())},l=()=>{!s||!s.current||s.current.open()};return h(A,{children:[n&&t(ee,{}),h("div",{className:f.buttonContainer,children:[t("div",{className:f.flexSpace}),t(E,{className:`${f.button} ${f.addSeedButton}`,type:"primary","data-cy":"add-seed",onClick:()=>e(ke),children:"Add Seed"}),t(E,{className:`${f.button} ${f.addItemButton}`,type:"primary","data-cy":"add-item",onClick:()=>l(),children:"Add Item"})]}),t(De,{ref:s,columns:a.map(i=>i.title),onOkClicked:()=>{c()}}),t(pe,{onDragEnd:d,children:t("div",{className:f.kanbanContainer,children:a.map(i=>t(me,{droppableId:i.id,children:(u,m)=>{const{dragOverIndex:g}=p.useContext(B),C=m.isDraggingOver,I=[...i.tasks];return C&&g!==null&&g<=I.length&&I.splice(g,0,{id:"__placeholder__",title:"",details:"",metadeta:"",isPlaceholder:!0}),t("div",{className:f.columnContainer,ref:u.innerRef,children:t(F,{header:t(te.Title,{className:f.kanbanRowTitle,level:4,children:i.title}),dataSource:I,renderItem:(b,T)=>b.isPlaceholder?t("div",{className:f.kanbanPlaceholder},"placeholder"):t(F.Item,{className:f.kanbanListItem,children:t(ge,{draggableId:b.id,index:T,children:x=>t(K,{"data-cy":"kanban-card",className:`${f.kanbanCard} ${x.dragging?f.dragging:""}`,title:b.title,ref:x.innerRef,...x.draggableProps,...x.dragHandleProps,children:t(K.Meta,{title:b.details,description:b.metadeta})})},b.id)})})})}},i.title))})})]})},Be=()=>t(Ae,{}),Fe=()=>t(ae,{basename:"/remanage/",children:t(ue,{children:h(ne,{children:[t(M,{path:"/",element:t(Be,{})}),t(M,{path:"*",element:t(re,{to:"/",replace:!0})})]})})}),Ke=oe.createRoot(document.getElementById("root"));Ke.render(t(Fe,{}));
