var q=Object.defineProperty;var X=(n,e,l)=>e in n?q(n,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[e]=l;var t=(n,e)=>q(n,"name",{value:e,configurable:!0});var I=(n,e,l)=>X(n,typeof e!="symbol"?e+"":e,l);import{j as a,l as M,P as Z,R as G,a as ee,b as C,F as $,C as te,c as ae,L as ne,r as m,i as _,S as re,I as A,B as L,d as oe,e as v,M as se,f as le,g as U,h as W,T as ie,k as de,m as ce,n as z,N as ue,o as pe}from"./.pnpm-DxFncyAk.js";t(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function l(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}t(l,"getFetchOpts");function r(o){if(o.ep)return;o.ep=!0;const s=l(o);fetch(o.href,s)}t(r,"processPreload")},"polyfill")();const me=t(()=>a(M.Header,{style:{backgroundColor:"transparent"},children:a(Z,{title:"re:manage",subTitle:"Manage your ways"})}),"Header"),H=class H extends G.Component{render(){return a("div",{style:{margin:"20px",flex:"grow"},children:a(M.Content,{children:this.props.children})})}};t(H,"Content");let F=H;const ge="_footer_1d89m_1",be="_footerTextCenter_1d89m_7",J={footer:ge,footerTextCenter:be},R=`ac0136c7467d4c8db65a2074e6f271d351955f85
`,fe=t(()=>{const[n,e]=ee.useNotification(),l=t(()=>{ae.copyText(R),n.open({key:R,message:"Trace ID copied to clipboard",description:`ID: ${R}`,duration:2,closeIcon:a("div",{})})},"copyLink");return C($,{children:[e,a(M.Footer,{className:J.footer,children:C("div",{className:J.footerTextCenter,children:[C("div",{children:["Trace: ",R,a(te,{onClick:t(()=>l(),"onClick")})]}),C("div",{children:["Â© ",new Date().getFullYear()," - Maifee Ul Asad"]})]})})]})},"Footer"),V=class V extends G.Component{render(){const{children:e}=this.props;return C(ne,{style:{minHeight:"100vh"},children:[a(me,{}),a(F,{children:e}),a(fe,{})]})}};t(V,"CustomLayout");let K=V;const j=m.createContext(null),he=t(({onDragEnd:n,children:e})=>{const[l,r]=m.useState(null),o=t(c=>{const u=c.target.closest("[data-droppable-id]");if(!u)return;const i=c.target.closest("[data-draggable-id]");let d=0;if(i){const p=Array.from(u.querySelectorAll("[data-draggable-id]"));d=p.findIndex(g=>g===i),d===-1&&(d=p.length)}r(d)},"handleDragOver"),s=t(c=>{c.preventDefault();const u=Number(c.dataTransfer.getData("sourceIndex")),i=c.dataTransfer.getData("sourceDroppableId"),d=c.dataTransfer.getData("draggableId"),p=c.target.closest("[data-droppable-id]");if(!p)return;const g=p.getAttribute("data-droppable-id"),b=c.target.closest("[data-draggable-id]");let y=0;if(b){const f=Array.from(p.querySelectorAll("[data-draggable-id]"));y=f.findIndex(O=>O===b),y===-1&&(y=f.length)}const D={source:{index:u,droppableId:i},destination:{index:y,droppableId:g},draggableId:d};r(null),n(D)},"handleDragEnd");return a(j.Provider,{value:{dragOverIndex:l,setDragOverIndex:r},children:a("div",{onDragOver:t(c=>{c.preventDefault(),o(c)},"onDragOver"),onDrop:s,children:e})})},"DragDropContext"),Q=m.createContext(null),Ce=t(({droppableId:n,children:e})=>{const l=m.useRef(null),{dragOverIndex:r}=m.useContext(j);return a(Q.Provider,{value:{droppableId:n},children:e({innerRef:t(o=>{l.current=o,o&&o.setAttribute("data-droppable-id",n)},"innerRef"),placeholder:r!==null?a("div",{style:{height:"40px",background:"#e0e0e0",border:"2px dashed #aaa",marginBottom:"8px"}},"__placeholder__"):null},{isDraggingOver:r!==null})})},"Droppable"),ye=t(({draggableId:n,index:e,children:l})=>{const r=m.useContext(Q),[o,s]=m.useState(!1);if(!r)throw new Error("Draggable must be used within a Droppable");const c=t(i=>{s(!0),i.dataTransfer.setData("draggableId",n),i.dataTransfer.setData("sourceIndex",e.toString()),i.dataTransfer.setData("sourceDroppableId",r.droppableId),i.dataTransfer.effectAllowed="move"},"handleDragStart"),u=t(()=>{s(!1)},"handleDragEnd");return l({innerRef:t(i=>{i&&(i.setAttribute("draggable","true"),i.setAttribute("data-draggable-id",n),i.setAttribute("data-index",e.toString()),i.addEventListener("dragstart",c),i.addEventListener("dragend",u))},"innerRef"),draggableProps:{draggable:!0},dragHandleProps:{},dragging:o})},"Draggable");var ke=Object.defineProperty,Ie=Object.getOwnPropertyDescriptor,S=t((n,e,l,r)=>{for(var o=r>1?void 0:r?Ie(e,l):e,s=n.length-1,c;s>=0;s--)(c=n[s])&&(o=(r?c(e,l,o):c(o))||o);return r&&o&&ke(e,l,o),o},"__decorateClass"),T;let N=(T=class{constructor(e,l,r,o,s){I(this,"id");I(this,"title");I(this,"details");I(this,"metadeta");I(this,"isPlaceholder");this.id=e,this.title=l,this.details=r,this.metadeta=o,this.isPlaceholder=s}},t(T,"Task"),T);S([_.KeyPath()],N.prototype,"id",2);S([_.Index()],N.prototype,"title",2);N=S([_.DataClass()],N);var P;let x=(P=class{constructor(e,l,r=[]){I(this,"id");I(this,"title");I(this,"tasks");this.id=e,this.title=l,this.tasks=r}},t(P,"Column"),P);S([_.KeyPath()],x.prototype,"id",2);S([_.Index()],x.prototype,"title",2);x=S([_.DataClass()],x);let E=null;const B=t(async()=>E||(E=await _.Database.build("kanban",[x,N]),E),"initDb"),De=t(async()=>await(await B()).Column.list(),"getColumnDB"),Y=t(async n=>{const e=await B();for(const l of n){const r=new x(l.id,l.title,l.tasks);try{await e.Column.update(r)}catch{await e.Column.create(r)}}},"setColumnDB"),xe=t(async n=>{const e=await B(),l=new x(n.id,n.title,n.tasks);await e.Column.update(l)},"updateColumnDB"),_e=t(()=>{const[n,e]=m.useState(!0),[l,r]=m.useState([]);return m.useEffect(()=>{t(async()=>{try{await B();const i=await De();r(i),e(!1)}catch(i){console.error("Failed to initialize database:",i),e(!1)}},"loadData")()},[]),{kanbanColumns:l,setKanbanColumns:t(async u=>{e(!0);try{await Y(u),r(u)}catch(i){console.error("Failed to set columns:",i)}finally{e(!1)}},"setKanbanColumns"),addNewKanbanColumn:t(async u=>{e(!0);try{await Y([u]),r([...l,u])}catch(i){console.error("Failed to add column:",i)}finally{e(!1)}},"addNewKanbanColumn"),updateKanbanColumn:t(async u=>{e(!0);try{await xe(u);const i=l.map(d=>d.id===u.id?u:d);r(i)}catch(i){console.error("Failed to update column:",i)}finally{e(!1)}},"updateKanbanColumn"),loading:n}},"kanbanDb"),we=[{id:"Backlog",title:"Backlog",tasks:[{id:"prem",title:"prem",details:"prem korte hobe"},{id:"taka",title:"taka",details:"onk onk taka",metadeta:""},{id:"time",title:"time",details:"time lagbe",metadeta:""},{id:"poralekha",title:"poralekha",details:"eta kortei vule gesi"}]},{id:"ToDo",title:"To Do",tasks:[{id:"shob",title:"shob",details:"ekdom shob..."}]},{id:"WIP",title:"WIP",tasks:[{id:"janinah",title:"janinah",details:"kichui jani nah"}]},{id:"Completed",title:"Completee",tasks:[]}],ve=t(({value:n,onChange:e,columnsExisting:l})=>{const[r,o]=m.useState(l),s=m.useRef(null);return a(re,{style:{width:300},onChange:t(()=>{},"onChange"),value:n,defaultValue:r[0]||void 0,onSelect:t(c=>{e&&e(c)},"onSelect"),options:r.map(c=>({value:c,label:c})),dropdownRender:t(c=>C($,{children:[c,C("div",{style:{display:"flex"},children:[a(A,{ref:s}),a(L,{icon:a(oe,{}),type:"primary",onClick:t(()=>{var i,d;const u=(d=(i=s.current)==null?void 0:i.input)==null?void 0:d.value;u&&!r.find(p=>p===u)&&o([...r,u])},"onClick")})]})]}),"dropdownRender")})},"EditableDropdown"),Te=m.forwardRef(({columns:n,onOkClicked:e},l)=>{const[r]=v.useForm(),[o,s]=m.useState(!1);return m.useImperativeHandle(l,()=>({close(){s(!1)},open(){s(!0)},getValue(){return new Promise((c,u)=>{r.validateFields().then(()=>{const i=r.getFieldsValue();c(i),r.resetFields()}).catch(()=>{u()})})}})),a(se,{title:"Add Item","data-cy":"add-item-modal",visible:o,closable:!0,onCancel:t(()=>s(!1),"onCancel"),onOk:t(()=>e(),"onOk"),children:C(v,{form:r,children:[a(v.Item,{name:"column",label:"Column",rules:[{required:!0,message:"Please select or enter COLUMN"}],children:a(ve,{columnsExisting:n})}),a(v.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter TITLE of your task"}],children:a(A,{placeholder:"Title"})}),a(v.Item,{name:"details",label:"Details",rules:[{required:!0,message:"Please enter DETAILS of your task"}],children:a(A,{placeholder:"Details"})}),a(v.Item,{name:"metadata",label:"Metadata",children:a(A.TextArea,{rows:5,placeholder:"Metadata"})})]})})}),Pe="_kanbanCard_1l8n9_1",Se="_buttonContainer_1l8n9_7",Oe="_flexSpace_1l8n9_13",Ne="_button_1l8n9_7",Re="_addSeedButton_1l8n9_21",Ee="_addItemButton_1l8n9_25",Ae="_kanbanContainer_1l8n9_29",Be="_columnContainer_1l8n9_34",Le="_dragging_1l8n9_42",Fe="_kanbanRowTitle_1l8n9_46",Ke="_kanbanListItem_1l8n9_50",Me="_kanbanPlaceholder_1l8n9_56",h={kanbanCard:Pe,buttonContainer:Se,flexSpace:Oe,button:Ne,addSeedButton:Re,addItemButton:Ee,kanbanContainer:Ae,columnContainer:Be,dragging:Le,kanbanRowTitle:Fe,kanbanListItem:Ke,kanbanPlaceholder:Me},$e=t(()=>{const{kanbanColumns:n,setKanbanColumns:e,addNewKanbanColumn:l,updateKanbanColumn:r,loading:o}=_e(),s=m.createRef(),c=t(d=>{if(d.destination===void 0||d.destination===null)return;const p=d.source.droppableId,g=d.destination.droppableId,b=n.find(k=>k.id===p),y=n.find(k=>k.id===g);if(b===void 0||y===void 0)return;const D=y.tasks,f=b.tasks,O=f[d.source.index];f.splice(d.source.index,1),D.splice(d.destination.index,0,O);const w=n.map(k=>k.id===p?{...k,tasks:f}:k.id===g?{...k,tasks:D}:k);e(w)},"handleOnDragEnd"),u=t(()=>{!s||!s.current||(s.current.getValue().then(d=>{const p=d.column,g=n.find(b=>b.id===p);if(g)g.tasks=[...g.tasks,{id:new Date().toUTCString(),title:d.title,details:d.details,metadeta:d.metadata}],r(g);else{const b={id:p,title:p,tasks:[{id:new Date().toUTCString(),title:d.title,details:d.details,metadeta:d.metadata}]};l(b)}}),s.current.close())},"onOkayClicked"),i=t(()=>{!s||!s.current||s.current.open()},"openNewItemModal");return C($,{children:[o&&a(le,{}),C("div",{className:h.buttonContainer,children:[a("div",{className:h.flexSpace}),a(L,{className:`${h.button} ${h.addSeedButton}`,type:"primary","data-cy":"add-seed",onClick:t(()=>e(we),"onClick"),children:"Add Seed"}),a(L,{className:`${h.button} ${h.addItemButton}`,type:"primary","data-cy":"add-item",onClick:t(()=>i(),"onClick"),children:"Add Item"})]}),a(Te,{ref:s,columns:n.map(d=>d.title),onOkClicked:t(()=>{u()},"onOkClicked")}),a(he,{onDragEnd:c,children:a("div",{className:h.kanbanContainer,children:n.map(d=>a(Ce,{droppableId:d.id,children:t((p,g)=>{const{dragOverIndex:b}=m.useContext(j),y=g.isDraggingOver,D=[...d.tasks];return y&&b!==null&&b<=D.length&&D.splice(b,0,{id:"__placeholder__",title:"",details:"",metadeta:"",isPlaceholder:!0}),a("div",{className:h.columnContainer,ref:p.innerRef,children:a(U,{header:a(ie.Title,{className:h.kanbanRowTitle,level:4,children:d.title}),dataSource:D,renderItem:t((f,O)=>f.isPlaceholder?a("div",{className:h.kanbanPlaceholder},"placeholder"):a(U.Item,{className:h.kanbanListItem,children:a(ye,{draggableId:f.id,index:O,children:t(w=>a(W,{"data-cy":"kanban-card",className:`${h.kanbanCard} ${w.dragging?h.dragging:""}`,title:f.title,ref:w.innerRef,...w.draggableProps,...w.dragHandleProps,children:a(W.Meta,{title:f.details,description:f.metadeta})}),"children")},f.id)}),"renderItem")})})},"children")},d.title))})})]})},"Kanban"),je=t(()=>a($e,{}),"Landing"),He=t(()=>a(de,{basename:"/remanage/",children:a(K,{children:C(ce,{children:[a(z,{path:"/",element:a(je,{})}),a(z,{path:"*",element:a(ue,{to:"/",replace:!0})})]})})}),"App"),Ve=pe.createRoot(document.getElementById("root"));Ve.render(a(He,{}));
